import{aI as z,r as g,a as E,ad as F,h as I,g as d,e,w as s,u as i,y as H,o as L,k as r,t as S,b3 as M,a0 as f}from"./CKxg9VfS.js";import{c as q,_ as G,a as J,b as O}from"./y658cYhg.js";import{_ as Q}from"./B8pS-BuA.js";import{u as R,t as W}from"./BCSPHuIH.js";import{_ as X}from"./tYwaLfcc.js";import{b as $}from"./Bw5H2Z6p.js";import{u as Y}from"./Bpf85daN.js";import{a as _}from"./Bjtksisr.js";import{P as Z}from"./CZYgztcZ.js";import{T as tt}from"./HXfFxbHn.js";import"./B1BtpM6Q.js";import"./fc2ftCRW.js";import"./CHIgUVhi.js";import"./CqMkjHLC.js";import"./DS3w2pYu.js";import"./BCknCIeb.js";import"./DZiD_n4a.js";import"./-VWu3lWq.js";import"./CdaYbVMG.js";import"./FxXfjA_C.js";import"./mqphGkif.js";import"./C6uedsDB.js";import"./CNZ14BIZ.js";import"./BE8kfJko.js";import"./DP3_pcoO.js";import"./BPEFIfMV.js";import"./ChOKVcqp.js";import"./BWQRRhWv.js";import"./CNC5rzjO.js";import"./8F3V6at2.js";import"./Bk27txv5.js";import"./DWe5xPtV.js";import"./BLmtRsFP.js";import"./DZHg-zPW.js";import"./CtxRJYhM.js";import"./DxI7QMRn.js";const et={class:"w-full flex flex-col items-stretch gap-4"},at={class:"flex flex-wrap items-end justify-between gap-2"},st={class:"col-span-2 flex justify-center items-center mt-4"},ot={class:"font-semibold text-red-500"},lt={class:"flex justify-end gap-2 mt-4"},qt={__name:"index",setup(nt){const{toast:y}=z(),T=[{value:!0,label:"ðŸŸ¢ Active"},{value:!1,label:"ðŸ”´ Inactive"}],m=g(!1),p=g(!1),n=g(null),k=W($),c=R({validationSchema:k,initialValues:{name:"",description:"",status:!0}}),{data:h,loading:it,pagination:u,fetchData:v,handlePageChange:A}=Y(async({page:a,limit:t})=>{const o=await _.get("/api/types",{params:{page:a,limit:t}});return u.total=o.total??0,o.data}),V=E(()=>h.value);F(v);const P=[{accessorKey:"name",header:"Name"},{accessorKey:"description",header:"Description"},{accessorKey:"status",header:"Status",cell:({row:a})=>{const t=T.find(o=>o.value===a.getValue("status"));return f("div",{class:"flex items-center"},[f("span",t==null?void 0:t.label)])}},{accessorKey:"actions",header:"Actions",cell:({row:a})=>{const t=a.original;return f("div",{class:"flex gap-2"},[f(Z,{class:"w-4 h-4 text-blue-600 cursor-pointer hover:scale-110 transition",onClick:()=>U(t)}),f(tt,{class:"w-4 h-4 text-red-600 cursor-pointer hover:scale-110 transition",onClick:()=>K(t)})])}}],U=a=>{n.value=a,c.setValues(a),m.value=!0},K=a=>{n.value=a,p.value=!0},B=async()=>{if(!n.value)return;(await _.delete(`/api/types/${n.value._id}`)).status&&(y({title:"Delete success"}),await v()),n.value=null,p.value=!1},N=c.handleSubmit(async a=>{const t={...a};let o;n.value?o=await _.put(`/api/types/${n.value._id}`,t):o=await _.post("/api/types",t),o.status&&(y({title:n.value?"Update success":"Add success"}),await v()),c.resetForm(),n.value=null,m.value=!1});return(a,t)=>{const o=H,x=O,b=M,w=J,j=Q,D=G,C=q;return L(),I("div",et,[d("div",at,[t[8]||(t[8]=d("h2",{class:"text-2xl font-bold tracking-tight"},"Type List",-1)),e(o,{onClick:t[0]||(t[0]=()=>m.value=!0)},{default:s(()=>t[7]||(t[7]=[r("Add")])),_:1,__:[7]})]),e(X,{data:i(V),columns:P,filterKey:"name",page:i(u).page,"onUpdate:page":t[1]||(t[1]=l=>i(u).page=l),onChangePage:i(A),size:i(u).limit,"onUpdate:size":t[2]||(t[2]=l=>i(u).limit=l),total:i(u).total,"onUpdate:total":t[3]||(t[3]=l=>i(u).total=l)},null,8,["data","page","onChangePage","size","total"]),e(C,{open:m.value,"onUpdate:open":t[4]||(t[4]=l=>m.value=l)},{default:s(()=>[e(D,null,{default:s(()=>[e(w,null,{default:s(()=>[e(x,null,{default:s(()=>[r(S(n.value?"Edit":"Add")+" Types",1)]),_:1}),e(b,{class:"text-xs text-muted-foreground"})]),_:1}),e(j,{class:"flex flex-col gap-2",form:i(c),schema:i($),onSubmit:i(N)},{default:s(()=>[d("div",st,[e(o,{type:"submit"},{default:s(()=>t[9]||(t[9]=[r("Save")])),_:1,__:[9]})])]),_:1},8,["form","schema","onSubmit"])]),_:1})]),_:1},8,["open"]),e(C,{open:p.value,"onUpdate:open":t[6]||(t[6]=l=>p.value=l)},{default:s(()=>[e(D,null,{default:s(()=>[e(w,null,{default:s(()=>[e(x,null,{default:s(()=>t[10]||(t[10]=[r("Confirm delete")])),_:1,__:[10]}),e(b,null,{default:s(()=>{var l;return[t[11]||(t[11]=r(" Are you sure you want to delete ")),d("span",ot,S((l=n.value)==null?void 0:l.name),1),t[12]||(t[12]=r("? "))]}),_:1,__:[11,12]})]),_:1}),d("div",lt,[e(o,{variant:"ghost",onClick:t[5]||(t[5]=l=>p.value=!1)},{default:s(()=>t[13]||(t[13]=[r("Cancel")])),_:1,__:[13]}),e(o,{variant:"destructive",onClick:B},{default:s(()=>t[14]||(t[14]=[r("Delete")])),_:1,__:[14]})])]),_:1})]),_:1},8,["open"])])}}};export{qt as default};
