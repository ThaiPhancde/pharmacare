import{d as w,r as f,ad as A,h as m,g as r,b as D,e as a,w as l,u as d,t as $,aU as B,o as c,k as y,a0 as i,P as M}from"./CKxg9VfS.js";import{u as I}from"./BUAQ2s_u.js";import{N as E}from"./BloDjXvy.js";import{B as n}from"./CkclNe_0.js";import{N as F}from"./CeAEZXwI.js";import{_ as H}from"./Bt2YpT3E.js";import{_ as O}from"./C_IQnCrB.js";import{_ as P}from"./CEFh3Vxc.js";import{_ as x}from"./DboHdRIr.js";import"./Bjtksisr.js";import"./ChAwXecA.js";import"./Be7d-GBD.js";import"./CbhVS3Xc.js";import"./mUUuLyVv.js";import"./BH030lJW.js";import"./gy6MXjwN.js";import"./Be3VPoHw.js";import"./HiGXOwLp.js";import"./fmyKo3Du.js";import"./BHMcXTSu.js";import"./CMIqKt_m.js";import"./DDBjNozI.js";import"./CfojvlWq.js";import"./DlZP_T-Q.js";import"./DpFlcqSt.js";import"./BH33Gl0k.js";const T={class:"container mx-auto p-4"},R={class:"flex justify-between items-center mb-6"},j={key:0,class:"flex justify-center items-center py-8"},L={key:1,class:"bg-red-50 border border-red-200 text-red-700 p-4 rounded mb-4"},U={key:2,class:"text-center py-8 bg-gray-50 rounded-lg"},Y={class:"text-gray-500 mb-2"},q={class:"text-4xl mb-2"},G=w({__name:"index",setup(J){const s=B(),k=I(),_=f(!0),p=f(""),g=f([]),b={pageSize:10},v=e=>new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(e),N=e=>{if(!e)return"N/A";const t=new Date(e);return isNaN(t.getTime())?"Invalid date":t.toLocaleDateString("vi-VN",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})},C=[{title:"Shipping Code",key:"shipping_code",render:e=>i(n,{type:"primary",strong:!0,size:"small",onClick:()=>s.push(`/shipping/track?code=${e.shipping_code}`),style:"background-color: #2080f0 !important; color: white !important"},{default:()=>e.shipping_code})},{title:"Invoice",key:"invoice",render:e=>{var o;const t=e.invoice_display||((o=e.invoice)==null?void 0:o.invoice_no)||e.invoice;return i(n,{type:"info",strong:!0,size:"small",onClick:()=>{var u;return s.push(`/invoice/${((u=e.invoice)==null?void 0:u._id)||e.invoice}`)},style:"background-color: #61affe !important; color: white !important"},{default:()=>t})}},{title:"Recipient",key:"recipient_name",render:e=>i("div",{},[i("div",{},e.recipient_name),i("div",{class:"text-xs text-gray-500"},e.recipient_phone)])},{title:"Payment",key:"payment",render:e=>i("div",{},[i(x,{type:e.is_cod?"warning":"success",style:e.is_cod?"background-color: #faad14 !important; color: white !important":"background-color: #52c41a !important; color: white !important"},{default:()=>e.is_cod?"COD":"Prepaid"}),e.is_cod?i("div",{class:"text-xs mt-1"},`Amount: ${v(e.cod_amount)}`):null])},{title:"Fee",key:"shipping_fee",render:e=>v(e.shipping_fee)},{title:"Status",key:"status",render:e=>{const o={pending:{color:"#d9d9d9",text:"Pending",type:"default"},confirmed:{color:"#1890ff",text:"Confirmed",type:"info"},shipping:{color:"#faad14",text:"Shipping",type:"warning"},delivered:{color:"#52c41a",text:"Delivered",type:"success"},cancelled:{color:"#f5222d",text:"Cancelled",type:"error"}}[e.status]||{color:"#d9d9d9",text:e.status,type:"default"};return i(x,{type:o.type,style:`background-color: ${o.color} !important; color: white !important`},{default:()=>o.text})}},{title:"Expected Delivery",key:"expected_delivery_date",render:e=>e.expected_delivery_date?i(F,{},{trigger:()=>i("span",{},N(e.expected_delivery_date)),default:()=>"Estimated delivery time"}):"N/A"},{title:"Actions",key:"actions",render:e=>i("div",{class:"flex gap-2"},[i(n,{type:"info",size:"small",onClick:()=>s.push(`/shipping/track?code=${e.shipping_code}`),style:"background-color: #61affe !important; color: white !important"},{default:()=>"Track"}),i(n,{type:"primary",size:"small",onClick:()=>{var t;return s.push(`/invoice/${((t=e.invoice)==null?void 0:t._id)||e.invoice}`)},style:"background-color: #2080f0 !important; color: white !important"},{default:()=>"View Invoice"})])}],h=async()=>{_.value=!0,p.value="";try{const e=await k.get("/api/shipping");e.status&&e.data?g.value=Array.isArray(e.data)?e.data:[]:p.value=e.message||"Failed to load shipping orders"}catch(e){console.error("Error loading shipping orders:",e),p.value=e.message||"An unexpected error occurred"}finally{_.value=!1}};return A(h),(e,t)=>{const o=O,u=E,z=P,S=H;return c(),m("div",T,[r("div",R,[t[3]||(t[3]=r("h1",{class:"text-2xl font-bold"},"Shipping Management",-1)),a(d(n),{type:"primary",onClick:t[0]||(t[0]=V=>d(s).push("/invoice"))},{default:l(()=>t[2]||(t[2]=[y(" Create New Shipping ")])),_:1,__:[2]})]),_.value?(c(),m("div",j,[a(o,{size:"large"})])):p.value?(c(),m("div",L,[r("p",null,$(p.value),1),a(d(n),{class:"mt-2",onClick:h},{default:l(()=>t[4]||(t[4]=[y("Retry")])),_:1,__:[4]})])):g.value.length?(c(),D(S,{key:3},{default:l(()=>[a(z,{columns:C,data:g.value,pagination:b,bordered:!1,striped:""},null,8,["data"])]),_:1})):(c(),m("div",U,[r("div",Y,[r("div",q,[a(u,null,{default:l(()=>t[5]||(t[5]=[r("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},[r("path",{fill:"currentColor",d:"M20 8h-3V4H3c-1.1 0-2 .9-2 2v11h2c0 1.66 1.34 3 3 3s3-1.34 3-3h6c0 1.66 1.34 3 3 3s3-1.34 3-3h2v-5l-3-4zm-.5 1.5l1.96 2.5H17V9.5h2.5zM6 18c-.55 0-1-.45-1-1s.45-1 1-1s1 .45 1 1s-.45 1-1 1zm2.22-3c-.55-.61-1.33-1-2.22-1s-1.67.39-2.22 1H3V6h12v9H8.22zM18 18c-.55 0-1-.45-1-1s.45-1 1-1s1 .45 1 1s-.45 1-1 1z"})],-1)])),_:1,__:[5]})]),t[6]||(t[6]=r("p",null,"No shipping orders found",-1))]),a(d(n),{onClick:t[1]||(t[1]=V=>d(s).push("/invoice"))},{default:l(()=>t[7]||(t[7]=[y("Create Your First Shipping Order")])),_:1,__:[7]})]))])}}}),ke=M(G,[["__scopeId","data-v-2c9e61b5"]]);export{ke as default};
