import{aI as q,r as y,a as I,ad as H,h as L,g as d,e,w as o,u as l,y as M,o as G,k as r,t as S,b3 as J,a0 as c}from"./CKxg9VfS.js";import{c as O,_ as Q,a as R,b as W}from"./y658cYhg.js";import{_ as X}from"./B8pS-BuA.js";import{u as Y,t as Z}from"./BCSPHuIH.js";import{_ as tt}from"./tYwaLfcc.js";import{o as k,b as A,s as f}from"./FxXfjA_C.js";import{u as et}from"./Bpf85daN.js";import{a as g}from"./Bjtksisr.js";import{P as at}from"./CZYgztcZ.js";import{T as ot}from"./HXfFxbHn.js";import"./B1BtpM6Q.js";import"./fc2ftCRW.js";import"./CHIgUVhi.js";import"./CqMkjHLC.js";import"./DS3w2pYu.js";import"./BCknCIeb.js";import"./DZiD_n4a.js";import"./-VWu3lWq.js";import"./CdaYbVMG.js";import"./mqphGkif.js";import"./C6uedsDB.js";import"./CNZ14BIZ.js";import"./BE8kfJko.js";import"./DP3_pcoO.js";import"./BPEFIfMV.js";import"./ChOKVcqp.js";import"./BWQRRhWv.js";import"./CNC5rzjO.js";import"./8F3V6at2.js";import"./Bk27txv5.js";import"./DWe5xPtV.js";import"./BLmtRsFP.js";import"./DZHg-zPW.js";import"./CtxRJYhM.js";import"./DxI7QMRn.js";k({id:f(),name:f().min(1,"Name is required"),description:f().optional(),status:A()});const T=k({name:f().min(1,"Name is required"),description:f().optional(),status:A().optional()}),st={class:"w-full flex flex-col items-stretch gap-4"},nt={class:"flex flex-wrap items-end justify-between gap-2"},it={class:"col-span-2 flex justify-center items-center mt-4"},lt={class:"font-semibold text-red-500"},rt={class:"flex justify-end gap-2 mt-4"},Jt={__name:"index",setup(ut){const{toast:x}=q(),h=[{value:!0,label:"ðŸŸ¢ Active"},{value:!1,label:"ðŸ”´ Inactive"}],m=y(!1),p=y(!1),i=y(null),V=Z(T),_=Y({validationSchema:V,initialValues:{name:"",description:"",status:!0}}),{data:N,loading:mt,pagination:u,fetchData:v,handlePageChange:P}=et(async({page:a,limit:t})=>{const s=await g.get("/api/categories",{params:{page:a,limit:t}});return u.total=s.total??0,s.data}),U=I(()=>N.value);H(v);const K=[{accessorKey:"name",header:"Name"},{accessorKey:"description",header:"Description"},{accessorKey:"status",header:"Status",cell:({row:a})=>{const t=h.find(s=>s.value===a.getValue("status"));return c("div",{class:"flex items-center"},[c("span",t==null?void 0:t.label)])}},{accessorKey:"actions",header:"Actions",cell:({row:a})=>{const t=a.original;return c("div",{class:"flex gap-2"},[c(at,{class:"w-4 h-4 text-blue-600 cursor-pointer hover:scale-110 transition",onClick:()=>j(t)}),c(ot,{class:"w-4 h-4 text-red-600 cursor-pointer hover:scale-110 transition",onClick:()=>B(t)})])}}],j=a=>{i.value=a,_.setValues(a),m.value=!0},B=a=>{i.value=a,p.value=!0},z=async()=>{if(!i.value)return;(await g.delete(`/api/categories/${i.value._id}`)).status&&(x({title:"Delete success"}),await v()),i.value=null,p.value=!1},E=_.handleSubmit(async a=>{const t={...a};let s;i.value?s=await g.put(`/api/categories/${i.value._id}`,t):s=await g.post("/api/categories",t),s.status&&(x({title:i.value?"Update success":"Add success"}),await v()),_.resetForm(),i.value=null,m.value=!1});return(a,t)=>{const s=M,b=W,w=J,D=R,F=X,C=Q,$=O;return G(),L("div",st,[d("div",nt,[t[8]||(t[8]=d("h2",{class:"text-2xl font-bold tracking-tight"},"Category List",-1)),e(s,{onClick:t[0]||(t[0]=()=>m.value=!0)},{default:o(()=>t[7]||(t[7]=[r("Add")])),_:1,__:[7]})]),e(tt,{data:l(U),columns:K,filterKey:"name",page:l(u).page,"onUpdate:page":t[1]||(t[1]=n=>l(u).page=n),onChangePage:l(P),size:l(u).limit,"onUpdate:size":t[2]||(t[2]=n=>l(u).limit=n),total:l(u).total,"onUpdate:total":t[3]||(t[3]=n=>l(u).total=n)},null,8,["data","page","onChangePage","size","total"]),e($,{open:m.value,"onUpdate:open":t[4]||(t[4]=n=>m.value=n)},{default:o(()=>[e(C,null,{default:o(()=>[e(D,null,{default:o(()=>[e(b,null,{default:o(()=>[r(S(i.value?"Edit":"Add")+" Category",1)]),_:1}),e(w,{class:"text-xs text-muted-foreground"})]),_:1}),e(F,{class:"flex flex-col gap-2",form:l(_),schema:l(T),onSubmit:l(E)},{default:o(()=>[d("div",it,[e(s,{type:"submit"},{default:o(()=>t[9]||(t[9]=[r("Save")])),_:1,__:[9]})])]),_:1},8,["form","schema","onSubmit"])]),_:1})]),_:1},8,["open"]),e($,{open:p.value,"onUpdate:open":t[6]||(t[6]=n=>p.value=n)},{default:o(()=>[e(C,null,{default:o(()=>[e(D,null,{default:o(()=>[e(b,null,{default:o(()=>t[10]||(t[10]=[r("Confirm delete")])),_:1,__:[10]}),e(w,null,{default:o(()=>{var n;return[t[11]||(t[11]=r(" Are you sure you want to delete ")),d("span",lt,S((n=i.value)==null?void 0:n.name),1),t[12]||(t[12]=r("? "))]}),_:1,__:[11,12]})]),_:1}),d("div",rt,[e(s,{variant:"ghost",onClick:t[5]||(t[5]=n=>p.value=!1)},{default:o(()=>t[13]||(t[13]=[r("Cancel")])),_:1,__:[13]}),e(s,{variant:"destructive",onClick:z},{default:o(()=>t[14]||(t[14]=[r("Delete")])),_:1,__:[14]})])]),_:1})]),_:1},8,["open"])])}}};export{Jt as default};
