import{r,ad as P,a_ as C,h as u,g as s,u as o,e as i,k as a,t as l,b as N,i as B,w as b,aU as V,o as c,_ as j}from"./CKxg9VfS.js";import{B as D}from"./CkclNe_0.js";import{u as M}from"./B9Nuy0Yo.js";import{_ as T}from"./C_IQnCrB.js";import"./mUUuLyVv.js";import"./CbhVS3Xc.js";import"./Be7d-GBD.js";import"./Be3VPoHw.js";const S={class:"min-h-screen flex items-center justify-center bg-gray-50"},F={class:"max-w-md w-full bg-white shadow-lg rounded-lg p-8"},O={class:"text-center"},R={key:0},U={class:"mx-auto flex items-center justify-center h-16 w-16 rounded-full bg-green-100 mb-4"},Y={class:"bg-gray-50 rounded p-4 mb-6"},q={class:"text-sm text-gray-600"},z={key:1},A={class:"mx-auto flex items-center justify-center h-16 w-16 rounded-full bg-red-100 mb-4"},E={class:"text-gray-600 mb-4"},$={key:2},G={class:"mx-auto flex items-center justify-center h-16 w-16 rounded-full bg-blue-100 mb-4"},H={class:"flex gap-4 justify-center"},te={__name:"callback",setup(J){const v=C(),p=V(),y=M(),n=r("processing"),d=r(""),_=r(0),g=r(""),m=r(""),w=t=>new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND",minimumFractionDigits:0}).format(t),h=()=>{p.push(`/invoice/${d.value}`)},k=()=>{p.push("/invoice/pos")};return P(()=>{const t=v.query;if(t.resultCode==="0"){n.value="success";let e=t.orderId||"";d.value=decodeURIComponent(e).replace(/\s+/g,"-").toUpperCase(),_.value=parseInt(t.amount)||0,g.value=t.transId||"",y.success("Payment successful! Your order has been processed.")}else n.value="error",m.value=t.message||"Payment failed",y.error(m.value)}),(t,e)=>{const f=j,I=T,x=D;return c(),u("div",S,[s("div",F,[s("div",O,[o(n)==="success"?(c(),u("div",R,[s("div",U,[i(f,{name:"i-lucide-check-circle",class:"h-10 w-10 text-green-600"})]),e[3]||(e[3]=s("h2",{class:"text-2xl font-bold text-gray-900 mb-2"},"Payment Successful!",-1)),e[4]||(e[4]=s("p",{class:"text-gray-600 mb-4"},"Your MoMo payment has been processed successfully.",-1)),s("div",Y,[s("div",q,[s("p",null,[e[0]||(e[0]=s("strong",null,"Order ID:",-1)),a(" "+l(o(d)),1)]),s("p",null,[e[1]||(e[1]=s("strong",null,"Amount:",-1)),a(" "+l(w(o(_))),1)]),s("p",null,[e[2]||(e[2]=s("strong",null,"Transaction ID:",-1)),a(" "+l(o(g)),1)])])])])):o(n)==="error"?(c(),u("div",z,[s("div",A,[i(f,{name:"i-lucide-x-circle",class:"h-10 w-10 text-red-600"})]),e[5]||(e[5]=s("h2",{class:"text-2xl font-bold text-gray-900 mb-2"},"Payment Failed",-1)),s("p",E,l(o(m)||"Your payment could not be processed."),1)])):(c(),u("div",$,[s("div",G,[i(I,{size:"large"})]),e[6]||(e[6]=s("h2",{class:"text-2xl font-bold text-gray-900 mb-2"},"Processing Payment...",-1)),e[7]||(e[7]=s("p",{class:"text-gray-600 mb-4"},"Please wait while we verify your payment.",-1))])),s("div",H,[o(n)==="success"?(c(),N(x,{key:0,type:"primary",onClick:h},{default:b(()=>e[8]||(e[8]=[a(" View Invoice ")])),_:1,__:[8]})):B("",!0),i(x,{onClick:k},{default:b(()=>[a(l(o(n)==="success"?"New Transaction":"Back to POS"),1)]),_:1})])])])])}}};export{te as default};
