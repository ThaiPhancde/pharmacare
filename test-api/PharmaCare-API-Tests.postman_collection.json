{
	"info": {
		"_postman_id": "a1b2c3d4-e5f6-7890-abcd-ef1234567890",
		"name": "PharmaCare API Tests",
		"description": "API Testing Collection for PharmaCare Pharmacy Management System - Contains 15 test cases",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"item": [
		{
			"name": "Authentication",
			"item": [
				{
					"name": "TC001 - Login Success",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('TC001: Login thanh cong - Status 200', function() {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test('TC001: Response co token', function() {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData.data).to.have.property('token');",
									"    pm.collectionVariables.set('authToken', jsonData.data.token);",
									"});",
									"",
									"pm.test('TC001: Response co user info', function() {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData.data.user).to.have.property('email');",
									"    pm.expect(jsonData.data.user).to.have.property('role');",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"email\": \"admin@pharmacare.com\",\n  \"password\": \"admin123\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/api/auth/login",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"auth",
								"login"
							]
						}
					},
					"response": []
				},
				{
					"name": "TC002 - Login Wrong Password",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('TC002: Login that bai - Status 401', function() {",
									"    pm.response.to.have.status(401);",
									"});",
									"",
									"pm.test('TC002: Response co error message', function() {",
									"    pm.expect(pm.response.text()).to.include('Invalid');",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"email\": \"admin@pharmacare.com\",\n  \"password\": \"wrongpassword\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/api/auth/login",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"auth",
								"login"
							]
						}
					},
					"response": []
				},
				{
					"name": "TC003 - Login Empty Credentials",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('TC003: Login voi credentials trong', function() {",
									"    pm.expect(pm.response.code).to.be.oneOf([400, 401, 500]);",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"email\": \"\",\n  \"password\": \"\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/api/auth/login",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"auth",
								"login"
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "Medicine",
			"item": [
				{
					"name": "TC004 - Get All Medicines",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('TC004: Get medicines - Status 200', function() {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test('TC004: Response co data array', function() {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData).to.have.property('data');",
									"    pm.expect(jsonData.data).to.be.an('array');",
									"});",
									"",
									"pm.test('TC004: Response time < 2s', function() {",
									"    pm.expect(pm.response.responseTime).to.be.below(2000);",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/api/medicine?page=1&limit=10",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"medicine"
							],
							"query": [
								{
									"key": "page",
									"value": "1"
								},
								{
									"key": "limit",
									"value": "10"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "TC005 - Search Medicine by Name",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('TC005: Search medicine - Status 200', function() {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test('TC005: Ket qua search hop le', function() {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData).to.have.property('data');",
									"    pm.expect(jsonData.status).to.be.true;",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/api/medicine?search=paracetamol",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"medicine"
							],
							"query": [
								{
									"key": "search",
									"value": "paracetamol"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "TC006 - Search Medicine by Barcode",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('TC006: Search by barcode - Status 200', function() {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test('TC006: Response la JSON hop le', function() {",
									"    pm.response.to.be.json;",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/api/medicine?bar_code=8936000123456",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"medicine"
							],
							"query": [
								{
									"key": "bar_code",
									"value": "8936000123456"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "TC007 - Get Medicine with Stocks",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('TC007: Get with stocks - Status 200', function() {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test('TC007: Medicine co stocks property', function() {",
									"    var jsonData = pm.response.json();",
									"    if (jsonData.data && jsonData.data.length > 0) {",
									"        pm.expect(jsonData.data[0]).to.have.property('stocks');",
									"    }",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/api/medicine?populate=stocks&limit=5",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"medicine"
							],
							"query": [
								{
									"key": "populate",
									"value": "stocks"
								},
								{
									"key": "limit",
									"value": "5"
								}
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "Customers",
			"item": [
				{
					"name": "TC008 - Get All Customers",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('TC008: Get customers - Status 200', function() {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test('TC008: Response structure dung', function() {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData).to.have.property('data');",
									"    pm.expect(jsonData).to.have.property('status');",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/api/customers?page=1&limit=10",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"customers"
							],
							"query": [
								{
									"key": "page",
									"value": "1"
								},
								{
									"key": "limit",
									"value": "10"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "TC009 - Create Customer Disabled",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('TC009: Manual customer creation disabled', function() {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData.status).to.be.false;",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"full_name\": \"Test Customer\",\n  \"contact_info\": {\n    \"phone\": \"0901234567\"\n  }\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/api/customers",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"customers"
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "Stock",
			"item": [
				{
					"name": "TC010 - Get All Stocks",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('TC010: Get stocks - Status 200', function() {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test('TC010: Stock co thong tin batch', function() {",
									"    var jsonData = pm.response.json();",
									"    if (jsonData.data && jsonData.data.length > 0) {",
									"        pm.expect(jsonData.data[0]).to.have.property('batch_id');",
									"    }",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/api/stock?page=1&limit=10",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"stock"
							],
							"query": [
								{
									"key": "page",
									"value": "1"
								},
								{
									"key": "limit",
									"value": "10"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "TC011 - Get Expiring Stocks",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('TC011: Get expiring stocks - Status 200', function() {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test('TC011: Response time acceptable', function() {",
									"    pm.expect(pm.response.responseTime).to.be.below(3000);",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/api/stock?expiring=true&days=30",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"stock"
							],
							"query": [
								{
									"key": "expiring",
									"value": "true"
								},
								{
									"key": "days",
									"value": "30"
								}
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "Invoice",
			"item": [
				{
					"name": "TC012 - Get All Invoices",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('TC012: Get invoices - Status 200', function() {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test('TC012: Response co data', function() {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData).to.have.property('data');",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/api/invoice?page=1&limit=10",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"invoice"
							],
							"query": [
								{
									"key": "page",
									"value": "1"
								},
								{
									"key": "limit",
									"value": "10"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "TC013 - Check Daily Limit",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('TC013: Check daily limit - Status 200', function() {",
									"    pm.response.to.have.status(200);",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"customer_id\": \"test-customer\",\n  \"medicine_id\": \"test-medicine\",\n  \"quantity\": 5\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/api/invoice/check-daily-limit",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"invoice",
								"check-daily-limit"
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "Dashboard",
			"item": [
				{
					"name": "TC014 - Get Dashboard Stats",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('TC014: Get dashboard - Status 200', function() {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test('TC014: Dashboard co statistics', function() {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData).to.have.property('data');",
									"});",
									"",
									"pm.test('TC014: Response time < 3s', function() {",
									"    pm.expect(pm.response.responseTime).to.be.below(3000);",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/api/dashboard",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"dashboard"
							]
						}
					},
					"response": []
				},
				{
					"name": "TC015 - Get Suppliers",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('TC015: Get suppliers - Status 200', function() {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test('TC015: Supplier co ten', function() {",
									"    var jsonData = pm.response.json();",
									"    if (jsonData.data && jsonData.data.length > 0) {",
									"        pm.expect(jsonData.data[0]).to.have.property('name');",
									"    }",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/api/suppliers?page=1&limit=10",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"suppliers"
							],
							"query": [
								{
									"key": "page",
									"value": "1"
								},
								{
									"key": "limit",
									"value": "10"
								}
							]
						}
					},
					"response": []
				}
			]
		}
	],
	"event": [
		{
			"listen": "prerequest",
			"script": {
				"type": "text/javascript",
				"exec": [
					""
				]
			}
		},
		{
			"listen": "test",
			"script": {
				"type": "text/javascript",
				"exec": [
					""
				]
			}
		}
	],
	"variable": [
		{
			"key": "baseUrl",
			"value": "http://localhost:3000",
			"type": "string"
		},
		{
			"key": "authToken",
			"value": "",
			"type": "string"
		}
	]
}
