@startuml
title Sequence Diagram: Forgot Password
actor "User" as user
participant "Forgot Pass UI" as ui
participant "Auth Controller" as api
database "Users Collection" as db
participant "Email Service" as email

user -> ui: Nhập Email đăng ký
user -> ui: Nhấn "Gửi yêu cầu"
activate ui

ui -> api: POST /api/auth/forgot-password
activate api

api -> db: Check Email exists
activate db
db --> api: Return Result
deactivate db

alt Email không tồn tại
    api --> ui: Error: "Email not registered"
else Email hợp lệ
    api -> api: Generate Reset Token
    api -> email: Send Reset Link to Email
    activate email
    email --> api: Sent Success
    deactivate email
    
    api --> ui: Success Message
    ui --> user: Thông báo "Vui lòng kiểm tra email"
end

deactivate api
deactivate ui
@enduml

